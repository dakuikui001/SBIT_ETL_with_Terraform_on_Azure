# sbit_medallion_pipeline/databricks.yml
bundle:
  name: sbit_medallion_pipeline

include:
  - resources/*.yml

variables:
  catalog:
    description: The catalog to use
  schema:
    description: The schema to use
  env:
    description: Execution environment (test or prod)

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://adb-7405617541715983.3.azuredatabricks.net
    variables:
      catalog: sbit_test_catalog
      schema: sbit_db_integration_test
      env: test  # 用于 Notebook 里的销毁逻辑判断
    presets:
      artifacts_dynamic_version: true

  prod:
    mode: production
    workspace:
      host: https://adb-7405617541715983.3.azuredatabricks.net
      root_path: /Workspace/Users/huilu001_outlook.com#ext#@huilu001outlook.onmicrosoft.com/.bundle/${bundle.name}/${bundle.target}
    variables:
      catalog: sbit_dev_catalog
      schema: sbit_db
      env: prod
    permissions:
      - user_name: huilu001_outlook.com#ext#@huilu001outlook.onmicrosoft.com
        level: CAN_MANAGE